!function(t){function a(t){this._init(t)}a.prototype={_init:function(t){this.x=t.x||0,this.y=t.y||0,this.opacity=t.opacity>=0&&t.opacity<=1?t.opacity:1,this.radius=t.radius||0,this.rotation=t.rotation||0,this.data=t.data||{},this.tempAngle=t.tempAngle||0,this.textDistance=t.textDistance||20,this.animateDuration=t.animateDuration||2,this.easing=t.easing||Konva.Easings.EaseIn,this.group=new Konva.Group({x:this.x,y:this.y,opacity:this.opacity}),this.wedgeGroup=new Konva.Group({x:0,y:0}),this.textGroup=new Konva.Group({x:0,y:0}),this.group.add(this.wedgeGroup),this.group.add(this.textGroup);var a=this,i=this.tempAngle,n=this.radius;this.data.forEach(function(t,e){var o=360*t.value,s=new Konva.Wedge({x:0,y:0,radius:n,angle:o,fill:t.color,rotation:i});a.wedgeGroup.add(s);var h=i+.5*o,r=new Konva.Text({x:0+(n+a.textDistance)*Math.cos(Math.PI/180*h),y:0+(n+a.textDistance)*Math.sin(Math.PI/180*h),text:t.name+" "+100*t.value+"%",fill:t.color});h>90&&h<270&&r.x(r.x()-r.getWidth()),a.textGroup.add(r),i+=o}),this._animateIndex=0},addToGroupOrLayer:function(t){t.add(this.group)},animatePie:function(){var t=this.group.find("Wedge");t.forEach(function(t,a){t.angle(0)});var a=0,i=function(){var n=t[a];a>=t.length||n.to({angle:360*this.data[a].value,duration:this.data[a].value*this.animateDuration,easing:this.easing,onFinish:function(){a++,i()}})};i()},playAnimate:function(){var t=this.wedgeGroup.getChildren();0==this._animateIndex&&t.forEach(function(t,a){t.angle(0)});var a=this;t[this._animateIndex].to({angle:360*a.data[a._animateIndex].value,duration:this.animateDuration*a.data[a._animateIndex].value,easing:this.easing,onFinish:function(){a._animateIndex++,a._animateIndex>=a.data.length?a._animateIndex=0:a.playAnimate()}})}};t.getPieChart=function(t){return new a(t)}}(window);