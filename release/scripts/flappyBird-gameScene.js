!function(t){function i(t){this.ctx=t.ctx,this.imgObj=t.imgObj,this.scale=t.scale||1,this.roles=[],this._initRoles(),this.listeners=[]}i.prototype={constructor:i,_initRoles:function(){this.roles.push(getSky({ctx:this.ctx,skyImg:this.imgObj.sky,scale:this.scale,speed:2})),this.roles.push(getSky({ctx:this.ctx,skyImg:this.imgObj.sky,scale:this.scale,speed:2})),this.roles.push(getSky({ctx:this.ctx,skyImg:this.imgObj.sky,scale:this.scale,speed:2}));for(t=0;t<9;t++)this.roles.push(getPipe({ctx:this.ctx,pipeUp:this.imgObj.pipeUp,pipeDown:this.imgObj.pipeDown,landH:this.imgObj.land.height*this.scale,scale:this.scale,speed:2}));for(var t=0;t<6;t++)this.roles.push(getLand({ctx:this.ctx,imgLand:this.imgObj.land,scale:this.scale,speed:2}));this.roles.push(getBird({ctx:this.ctx,imgBird:this.imgObj.bird,widthFrame:3,heightFrame:1,scale:this.scale,speed:2}))},addListener:function(t){this.listeners.push(t)},triggerBirdOver:function(){this.listeners.forEach(function(t){t()})},render:function(t){var i=getBird(),s=i.x+i.imgW/2,e=i.y+i.imgH/2;this.ctx.isPointInPath(s,e)||e<0||e>this.ctx.canvas.height-this.imgObj.land.height*this.scale?this.triggerBirdOver():(this.ctx.beginPath(),this.roles.forEach(function(t){t.render()}),this._calcuTime(t))},_calcuTime:function(t){var i=0,s=0,e=0,h=((new Date).getTime()-t)/1e3;i=(i=parseInt(h%60))>9?i:"0"+i,s=(s=parseInt(h/60%60))>9?s:"0"+s;var c="用时："+(e=(e=parseInt(h/3600))>9?e:"0"+e)+"小时"+s+"分钟"+i+"秒";ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle="yellow",ctx.font="400 20px 微软雅黑",ctx.textAlign="end",ctx.fillText(c,ctx.canvas.width-20,30)}},t.getGameScene=function(t){return new i(t)}}(window);