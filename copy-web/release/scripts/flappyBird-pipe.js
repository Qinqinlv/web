!function(i){function t(i){this.ctx=i.ctx,this.pipeUp=i.pipeDown,this.pipeDown=i.pipeUp,this.space=i.space||160,this.startX=i.startX||300,this.pipeX=i.pipeX||this.startX,this.scale=i.scale||1,this.gap=i.gap||160,this.pipeUpW=this.scale*this.pipeUp.width||this.pipeUp.width,this.pipeUpH=this.scale*this.pipeUp.height||this.pipeUp.height,this.pipeDownW=this.scale*this.pipeDown.width||this.pipeDown.width,this.pipeDownH=this.scale*this.pipeDown.height||this.pipeDown.height,this.landH=i.landH||112,this.sumHeight=this.ctx.canvas.height-this.gap-this.landH,this.minHeight=i.minHeight||60,this.maxHeight=this.sumHeight-this.minHeight,this._init(i),this.speed=i.speed||2,t.len++,this.pipeX+=this.space*(t.len-1)}t.len=0,t.prototype={constructor:t,_init:function(i){var t=Math.floor(Math.random()*this.maxHeight);t=t>this.minHeight?t:this.minHeight,this.upHeight=t,this.downHeight=this.sumHeight-this.upHeight,this.upHeight<=this.pipeUpH?this.pipeUpY=this.upHeight-this.pipeUpH:this.pipeUpY=0,this.pipeDownY=t+this.gap},render:function(){this.pipeX-=this.speed,this.ctx.drawImage(this.pipeUp,0,0,this.pipeUp.width,this.pipeUp.height,this.pipeX,this.pipeUpY,this.pipeUpW,this.pipeUpH),this.ctx.drawImage(this.pipeDown,0,0,this.pipeDown.width,this.pipeDown.height,this.pipeX,this.pipeDownY,this.pipeDownW,this.downHeight),this.update(),this._drawPath()},update:function(){this.pipeX<=-this.pipeUpW&&(this.pipeX+=this.space*t.len,this._init())},_drawPath:function(){this.ctx.rect(this.pipeX,this.pipeUpY,this.pipeUpW,this.pipeUpH),this.ctx.rect(this.pipeX,this.pipeDownY,this.pipeDownW,this.downHeight)}},i.getPipe=function(i){return new t(i)}}(window);