!function(t){function e(t){var e=document.getElementById(t),n=e.children,i=n[0].offsetWidth,d=Math.floor(o().width/i);e.style.cssText="width:"+i*d+"px;";for(var a=[],l=0;l<n.length;l++){var c=n[l].offsetHeight;if(l<d)a[l]=c;else{var r=Math.min.apply(null,a),f=a.indexOf(r);n[l].style.position="absolute",n[l].style.top=r+"px",n[l].style.left=n[f].offsetLeft+"px",a[f]+=n[l].offsetHeight}}}function n(t){var e=(t=document.getElementById(t)).children,n=e[e.length-1].offsetHeight,d=i().top,a=o().height;return n-a<d+a}function o(){return window.innerWidth?{width:window.innerWidth,height:window.innerHeight}:"CSS1Compat"==document.compatMode?{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}:{width:document.body.clientWidth,height:document.body.clientHeight}}function i(){return null!=window.pageYOffset?{left:window.pageXOffset,top:window.pageYOffset}:"CSS1Compat"==document.compatMode?{left:document.documentElement.scroll,top:document.documentElement.scroll}:{left:document.body.scrollLeft,top:document.body.scrollTop}}var d=!1;(window.addEventListener?function(t,e,n){t.addEventListener(e,n)}:window.attachEvent?function(t,e,n){t.attachEvent(e,n)}:function(t,e,n){t["on"+e]=n})(window,"scroll",function(){if(!d&&(d=!0,n("itemParent"))){var t=new XMLHttpRequest;t.open("post","./api/waterfall.php"),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4==t.readyState&&(t.status>=200&&t.status<300||304==t.status)){var n=t.responseText,o={item:n=JSON.parse(n)},i=template("template",o);itemParent.innerHTML+=i,e("itemParent"),d=!1}},t.send()}}),e("itemParent"),t.waterfall=e}(window);