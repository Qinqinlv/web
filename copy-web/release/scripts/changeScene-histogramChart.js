!function(t){function i(t){this._init(t)}i.prototype={_init:function(t){this.x=t.x||0,this.y=t.y||0,this.width=t.width||200,this.height=t.height||200,this.data=t.data||{},this.opacity=t.opacity>=0&&t.opacity<=1?t.opacity:1,this.totalGroup=new Konva.Group({x:this.x,y:this.y,opacity:this.opacity}),this.rectGroup=new Konva.Group({x:0,y:0}),this.textTopGroup=new Konva.Group({x:0,y:0}),this.totalGroup.add(this.textTopGroup),this.textBottomGroup=new Konva.Group({x:0,y:0}),this.totalGroup.add(this.textBottomGroup);var i=new Konva.Line({points:[0,0,this.width,0],stroke:"green",strokeWidth:1});this.totalGroup.add(i);var o=this.width/this.data.length,a=this,h=[];this.data.forEach(function(t,i){h.push(t.value)});var e=Math.max.apply(null,h);this.height=this.height/e,this.data.forEach(function(t,i){var h=new Konva.Rect({x:(.25+i)*o,y:-a.height*t.value,width:.5*o,height:a.height*t.value,fill:t.color});a.rectGroup.add(h),a.totalGroup.add(a.rectGroup);var e=new Konva.Text({x:i*o,y:-a.height*t.value-20,width:o,align:"center",fill:t.color,text:100*t.value+"%",fontSize:14,fontFamily:"Microsoft Yahei",name:"textTop"});a.textTopGroup.add(e);var n=new Konva.Text({x:(.5+i)*o,y:10,align:"center",fill:t.color,text:t.name,fontSize:14,fontFamily:"Microsoft Yahei",rotation:35});a.textBottomGroup.add(n)})},addToGroupOrLayer:function(t){t.add(this.totalGroup)},playAnimation:function(){var t=this;this.rectGroup.getChildren().each(function(i,o){i.height(0),i.y(0),i.to({duration:1,y:-t.height*t.data[o].value,height:t.height*t.data[o].value})}),this.textTopGroup.getChildren().each(function(i,o){i.y(-20),i.to({y:-t.data[o].value*t.height-20,duration:1})})}};t.getHistogramChart=function(t){return new i(t)}}(window);